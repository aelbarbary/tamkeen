{% load static %}

<link href ="//cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" rel="stylesheet">
<script src="{% static "vendor/jquery/jquery.min.js" %}"></script>
<script data-cfasync="false" type="text/javascript" src="//cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js">
</script>
<script >
$(document).ready(function() {
  var t = $('#example').DataTable();

  $.ajax({
             type: "GET",
             dataType: "json",
             url: "/rest/members",
             success: function(data){
               data.forEach(function(entry) {
                 t.row.add( [
                     "<img src='/media/" + entry["fields"]["photo"] + "' width=100px/>", 
                     entry["fields"]["first_name"],
                     entry["fields"]["last_name"],
                     entry["fields"]["email"],
                     entry["fields"]["whats_app"],
                     entry["fields"]["gender"]
                 ] ).draw( false );
             }
         )}
       });

  // Automatically add a first row of data
  $('#addRow').click();
} );
</script>

<table id="example" class="display" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Email</th>
                <th>WhatsApp</th>
                <th>Gender</th>
            </tr>
        </thead>
        <tfoot>
            <tr>
              <th>First Name</th>
              <th>Last Name</th>
              <th>Email</th>
              <th>WhatsApp</th>
              <th>Gender</th>
            </tr>
        </tfoot>
    </table>
